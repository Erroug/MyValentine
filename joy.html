<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>She Said Yes ðŸ’–</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  height:100vh;
  background:black;
  overflow:hidden;
  font-family:'Segoe UI',sans-serif;
}

/* CANVAS LAYERS */
#sky,#fireworks{
  position:fixed;
  inset:0;
}

/* IMAGE WRAPPER */
.scene-wrap{
  position:relative;
  z-index:2;
  width:340px;
  margin:auto;
  top:50%;
  transform:translateY(-50%);
}

/* IMAGE */
#scene{
  width:100%;
  border-radius:25px;
  box-shadow:0 0 60px rgba(255,105,180,.9);
  animation:joy 2s infinite alternate;
}

/* EMOJI CRACKERS */
.emoji-particle{
  position:fixed;
  pointer-events:none;
  font-size:22px;
  z-index:1;
  opacity:.9;
  animation:emojiCracker 2.4s ease-out forwards;
}

@keyframes emojiCracker{
  0%{transform:translate(0,0) scale(.6);opacity:0}
  15%{opacity:1}
  100%{transform:translate(var(--x),var(--y)) scale(1.4);opacity:0}
}

@keyframes joy{
  from{transform:scale(1)}
  to{transform:scale(1.08)}
}
</style>
</head>

<body>

<canvas id="sky"></canvas>
<canvas id="fireworks"></canvas>

<div class="scene-wrap">
  <img src="assets/images/joy.png" id="scene">
</div>

<!-- ðŸ”Š AUDIO (AUTOPLAY â€” ALLOWED BECAUSE PAGE OPENED FROM YES CLICK) -->
<audio id="bgMusic" src="assets/audio/happy-music.mp3" autoplay loop></audio>
<audio id="fireSound" src="assets/audio/firework.mp3"></audio>
<audio id="cheerSound" src="assets/audio/cheer.mp3"></audio>

<script>
/* ================= ðŸ”Š AUDIO START ================= */
const bgMusic=document.getElementById("bgMusic");
const fireSound=document.getElementById("fireSound");
const cheerSound=document.getElementById("cheerSound");

bgMusic.volume=0.5;
fireSound.volume=0.8;
cheerSound.volume=0.7;

// force play on load (YES click grants permission)
window.addEventListener("load",()=>{
  bgMusic.play().catch(()=>{});
  setTimeout(()=>cheerSound.play().catch(()=>{}),800);
});

/* ================= ðŸŒŒ NIGHT SKY ================= */
const sky=document.getElementById("sky"),sctx=sky.getContext("2d");
function rs(){sky.width=innerWidth;sky.height=innerHeight}
rs();addEventListener("resize",rs);

const bgStars=Array.from({length:300},()=>({
  x:Math.random()*sky.width,
  y:Math.random()*sky.height,
  r:Math.random()*0.9+0.2,
  a:Math.random(),
  t:Math.random()*0.015+0.002
}));

(function drawSky(){
  sctx.clearRect(0,0,sky.width,sky.height);
  bgStars.forEach(s=>{
    s.a+=s.t;if(s.a<=0||s.a>=1)s.t*=-1;
    sctx.globalAlpha=s.a;
    sctx.fillStyle="white";
    sctx.beginPath();
    sctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    sctx.fill();
    sctx.globalAlpha=1;
  });
  requestAnimationFrame(drawSky);
})();

/* ================= ðŸŽ† STAR FIREWORKS ================= */
const fw=document.getElementById("fireworks"),ctx=fw.getContext("2d");
function rf(){fw.width=innerWidth;fw.height=innerHeight}
rf();addEventListener("resize",rf);

/* SHAPES */
function heartShape(n){
  const pts=[];
  for(let i=0;i<n;i++){
    const t=Math.PI*2*i/n;
    pts.push([
      16*Math.pow(Math.sin(t),3),
      -(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t))
    ]);
  }
  return pts;
}
function happyFace(){
  const pts=[];
  for(let i=0;i<18;i++){
    const t=Math.PI*2*i/18;
    pts.push([-6+Math.cos(t)*1.2, -(4+Math.sin(t)*1.2)]);
    pts.push([ 6+Math.cos(t)*1.2, -(4+Math.sin(t)*1.2)]);
  }
  for(let i=0;i<40;i++){
    const t=Math.PI*i/40;
    pts.push([Math.cos(t)*10, Math.sin(t)*6+2]);
  }
  return pts;
}
function blushFace(){
  const pts=[];
  heartShape(20).forEach(p=>pts.push([p[0]*.15-6, -(p[1]*.15+4)]));
  heartShape(20).forEach(p=>pts.push([p[0]*.15+6, -(p[1]*.15+4)]));
  for(let i=0;i<36;i++){
    const t=Math.PI*i/36;
    pts.push([Math.cos(t)*9, Math.sin(t)*5+2]);
  }
  return pts;
}
function hugFace(){
  const pts=[];
  for(let i=0;i<12;i++){
    const t=Math.PI*2*i/12;
    pts.push([-4+Math.cos(t), -(3+Math.sin(t))]);
    pts.push([ 4+Math.cos(t), -(3+Math.sin(t))]);
  }
  for(let i=0;i<30;i++){
    const t=Math.PI*i/30;
    pts.push([Math.cos(t)*8, Math.sin(t)*5+2]);
  }
  for(let i=0;i<35;i++){
    const t=Math.PI*i/35;
    pts.push([-10-Math.cos(t)*4, Math.sin(t)*6]);
    pts.push([ 10+Math.cos(t)*4, Math.sin(t)*6]);
  }
  return pts;
}
function loveFace(){
  const pts=[];
  heartShape(26).forEach(p=>pts.push([p[0]*.12-5, -(p[1]*.12+4)]));
  heartShape(26).forEach(p=>pts.push([p[0]*.12+5, -(p[1]*.12+4)]));
  for(let i=0;i<30;i++){
    const t=Math.PI*i/30;
    pts.push([Math.cos(t)*7, Math.sin(t)*4+2]);
  }
  return pts;
}

const SHAPES=[heartShape(140),happyFace(),blushFace(),hugFace(),loveFace()];

/* PARTICLES */
class BurstParticle{
  constructor(x,y,vx,vy){this.x=x;this.y=y;this.vx=vx;this.vy=vy;this.life=1}
  update(){this.x+=this.vx;this.y+=this.vy;this.vy+=.02;this.life-=.02}
  draw(){
    if(this.life<=0)return;
    ctx.globalAlpha=this.life;
    ctx.fillStyle="white";
    ctx.beginPath();
    ctx.arc(this.x,this.y,2,0,Math.PI*2);
    ctx.fill();
    ctx.globalAlpha=1;
  }
}
class ShapeStar{
  constructor(x,y,tx,ty){
    this.x=x;this.y=y;this.tx=tx;this.ty=ty;
    this.a=1;this.hold=90;this.size=Math.random()*1.6+1;
  }
  update(){
    if(this.hold>0){
      this.x+=(this.tx-this.x)*.12;
      this.y+=(this.ty-this.y)*.12;
      this.hold--;
    } else this.a-=.01;
  }
  draw(){
    if(this.a<=0)return;
    ctx.globalAlpha=this.a;
    ctx.fillStyle="white";
    ctx.beginPath();
    ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
    ctx.fill();
    ctx.globalAlpha=1;
  }
}
class Firework{
  constructor(){
    this.x=Math.random()*fw.width*.6+fw.width*.2;
    this.y=fw.height;
    this.ty=Math.random()*fw.height*.35+140;
    this.stage="launch";
    this.burst=[];
    this.stars=[];
    this.shape=SHAPES[Math.floor(Math.random()*SHAPES.length)];
  }
  update(){
    if(this.stage==="launch"){
      this.y-=6;
      if(this.y<=this.ty)this.explode();
    }
    else if(this.stage==="burst"){
      this.burst.forEach(p=>p.update());
      if(this.burst.every(p=>p.life<=0))this.form();
    }
    else this.stars.forEach(s=>s.update());
  }
  draw(){
    if(this.stage==="launch")ctx.fillRect(this.x,this.y,2,6);
    else if(this.stage==="burst")this.burst.forEach(p=>p.draw());
    else this.stars.forEach(s=>s.draw());
  }
  explode(){
    fireSound.currentTime=0;
    fireSound.play().catch(()=>{});
    this.stage="burst";
    for(let i=0;i<60;i++){
      const a=Math.random()*Math.PI*2;
      this.burst.push(new BurstParticle(this.x,this.y,Math.cos(a)*4,Math.sin(a)*4));
    }
  }
  form(){
    this.stage="shape";
    this.shape.forEach(pt=>{
      this.stars.push(new ShapeStar(this.x,this.y,this.x+pt[0]*7,this.y+pt[1]*7));
    });
  }
}

let fireworks=[];
(function loop(){
  ctx.clearRect(0,0,fw.width,fw.height);
  fireworks.forEach((f,i)=>{
    f.update();f.draw();
    if(f.stage==="shape"&&f.stars.every(s=>s.a<=0))fireworks.splice(i,1);
  });
  requestAnimationFrame(loop);
})();
setInterval(()=>fireworks.push(new Firework()),1600);

/* ðŸ’– EMOJI CRACKERS */
const EMOJIS=["ðŸ’–","ðŸ’•","â¤ï¸","ðŸ¥°","âœ¨"];
function emojiCracker(){
  const startX=Math.random()*innerWidth*.6+innerWidth*.2;
  const burstY=Math.random()*innerHeight*.4+innerHeight*.15;
  setTimeout(()=>{
    for(let i=0;i<10;i++){
      const e=document.createElement("div");
      e.className="emoji-particle";
      e.textContent=EMOJIS[Math.floor(Math.random()*EMOJIS.length)];
      const a=Math.random()*Math.PI*2;
      const d=Math.random()*90+40;
      e.style.left=startX+"px";
      e.style.top=burstY+"px";
      e.style.setProperty("--x",Math.cos(a)*d+"px");
      e.style.setProperty("--y",Math.sin(a)*d+"px");
      e.style.fontSize=Math.random()*10+18+"px";
      document.body.appendChild(e);
      setTimeout(()=>e.remove(),2500);
    }
  },600);
}
setInterval(emojiCracker,2800);
</script>

</body>
</html>
